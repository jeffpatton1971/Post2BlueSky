name: 'Post2BlueSky'
description: 'Send notifications to BlueSky social media for new content updates.'
author: 'Jeff Patton'

branding:
  icon: 'bell'
  color: 'blue'

inputs:
  source:
    description: 'The path to the project file (either .psd1 or .csproj).'
    required: true
  projectName:
    description: 'The name of the project, used in the notification message.'
    required: true
secrets:
  bluesky_api_key:
    description: 'Your BlueSky App Password'
    required: true
  bluesky_identifier:
    description: 'Your BlueSky Identifier, something like user.bsky.social'
    required: true
runs:
  using: 'composite'
  steps:
    - name: Checkout Repository
      uses: actions/checkout@v2

    - name: Send BlueSky Notification
      run: |
        pwsh -File post2bsky.ps1 -Source ${{ inputs.source }} -ProjectName ${{ inputs.projectName }} -Identifier ${{ secrets.bluesky_identifier }} -Password ${{ secrets.bluesky_api_key }}
      shell: pwsh